package tests;

import static org.junit.Assert.*;

import java.io.ByteArrayInputStream;
import java.util.NoSuchElementException;

import javax.management.RuntimeErrorException;

import org.junit.Test;

import main.*;

public class ReactionTests {
	
	@Test public void swordNothingReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create t 0\n"+
					   "e t\n"+
					   "pass\n";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |  |  |     |     |     |     |     |     |     |\n" +
				"|     |     |  t  |     |     |     |     |     |     |     |\n" +
				"|     |     |  |  |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}		
	}
	
	@Test public void swordSwordReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create t 0\n"+
					   "e t\n"+
					   "move t down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create o 0\n"+
					   "o t\n"+
					   "pass\n";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}		
	}
	
	@Test public void swordShieldReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create t 0\n"+
					   "e t\n"+
					   "move t down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create o 270\n"+
					   "o t\n"+
					   "pass\n";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     | -o- |     |     |     |     |     |     |     |\n" +
				"|     |     |  #  |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |  |  |     |     |     |     |     |     |     |\n" +
				"|     |     |  t  |     |     |     |     |     |     |     |\n" +
				"|     |     |  |  |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}		
	}
	
	@Test public void swordShieldOffBoardReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create t 0\n"+
					   "e t\n"+
					   "move t up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create o 90\n"+
					   "o t\n"+
					   "move o up\n"+
					   "o t\n";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |  #  |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  | -o- |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}		
	}
	
	@Test public void swordFaceReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create t 0\n"+
					   "e t\n"+
					   "move t down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create o 270\n"+
					   "o t\n"+
					   "move o up\n"+
					   "face o\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		boolean pass = false;
		Main attempt = new Main(in){
			@Override
			public void gameOver() {
				throw new RuntimeErrorException(null);
			}
		};
		try {attempt.startGame();
		} catch (RuntimeErrorException e) {		
			pass = true;
		}	
		assertTrue(pass);
	}
	
	@Test public void swordNothingOtherTeamReaction() {
		String input = "create e 0\n"+
					   "move e down\n"+
					   "pass\n"+
					   "create u 0\n"+
					   "move u up\n"+
					   "pass\n"+
					   "pass\n"+
					   "move e down\n"+
					   "pass\n"+
					   "pass\n"+
					   "move u up\n"+
					   "pass\n"+
					   "pass\n"+
					   "move e down\n"+
					   "pass\n"+
					   "pass\n"+
					   "move u left\n"+
					   "pass\n"+
					   "pass\n"+
					   "move e right\n"+
					   "pass\n"+
					   "pass\n"+
					   "move u left\n"+
					   "pass\n"+
					   "pass\n"+
					   "move e right\n"+
					   "e U";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |  |  |     |     |     |     |\n" +
				"|     |     |     |     |     | -U  |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}	
	}
	
	@Test public void swordSwordOtherTeamReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create b 270\n"+
					   "move b down\n"+
					   "pass\n"+
					   "create u 0\n"+
					   "move u up\n"+
					   "pass\n"+
					   "pass\n"+
					   "move b down\n"+
					   "pass\n"+
					   "pass\n"+
					   "move u up\n"+
					   "pass\n"+
					   "pass\n"+
					   "move b down\n"+
					   "pass\n"+
					   "pass\n"+
					   "move u left\n"+
					   "pass\n"+
					   "pass\n"+
					   "move b right\n"+
					   "pass\n"+
					   "pass\n"+
					   "move u left\n"+
					   "pass\n"+
					   "pass\n"+
					   "move b right\n"+
					   "b U";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |  e  |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}	
	}
	
	@Test public void swordShieldOtherTeamReaction() {
		String input = "create e 0\n"+
				   "move e up\n"+
				   "pass\n"+
				   "pass\n"+
				   "pass\n"+
				   "create c 270\n"+
				   "move c down\n"+
				   "pass\n"+
				   "create u 0\n"+
				   "move u up\n"+
				   "pass\n"+
				   "pass\n"+
				   "move c down\n"+
				   "pass\n"+
				   "pass\n"+
				   "move u up\n"+
				   "pass\n"+
				   "pass\n"+
				   "move c down\n"+
				   "pass\n"+
				   "pass\n"+
				   "move u left\n"+
				   "pass\n"+
				   "pass\n"+
				   "move c right\n"+
				   "pass\n"+
				   "pass\n"+
				   "move u left\n"+
				   "pass\n"+
				   "pass\n"+
				   "move c right\n"+
				   "c U";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |  e  |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |  #  |     |  |  |     |     |     |\n" +
				"|     |     |     |     | #c# |     | -U  |     |     |     |\n" +
				"|     |     |     |     |  #  |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}	
	}
	
	@Test public void swordFaceOtherTeamReaction() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create g 0\n"+
					   "e g\n"+
					   "move g down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g down\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "move g right\n"+
					   "face g";

		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		boolean pass = false;
		Main attempt = new Main(in){
			@Override
			public void gameOver() {
				throw new RuntimeErrorException(null);
			}
		};
		try {attempt.startGame();
		} catch (RuntimeErrorException e) {		
			pass = true;
		}	
		assertTrue(pass);	
	}
	
	@Test public void multipleReaction1() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create c 0\n"+
					   "move c right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create g 0\n"+
					   "e g\n"+
					   "c g\n";
		String expected ="-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"| XXX | XXX |     |     |     |     |     |     |     |     |\n" +
				"|  X  |  X  |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"| XXX |  1  |     |     |     |     |     |     |     |     |\n" +
				"|  X  |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |  |  |     |  #  |     |     |     |     |     |     |\n" +
				"|     | -g- |     | #c# |     |     |     |     |     |     |\n" +
				"|     |  |  |     |  #  |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |  0  | xxx |\n" +
				"|     |     |     |     |     |     |     |     |     |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     | xxx | xxx |\n" +
				"|     |     |     |     |     |     |     |     |  x  |  x  |\n" +
				"|     |     |     |     |     |     |     |     |     |     |\n" +
				"-------------------------------------------------------------\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		Main attempt = new Main(in);
		try {attempt.startGame();
		} catch (NoSuchElementException e) {

			assertEquals(attempt.board.toString(), expected);			
		}		
	}
	
	@Test public void multipleReaction2() {
		String input = "create e 0\n"+
					   "move e up\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create c 0\n"+
					   "move c right\n"+
					   "pass\n"+
					   "pass\n"+
					   "pass\n"+
					   "create g 0\n"+
					   "c g\n"+
					   "face g\n";
		ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());
		boolean pass = false;
		Main attempt = new Main(in){
			@Override
			public void gameOver() {
				throw new RuntimeErrorException(null);
			}
		};
		try {attempt.startGame();
		} catch (RuntimeErrorException e) {		
			pass = true;
		}	
		assertTrue(pass);	
	}


}
